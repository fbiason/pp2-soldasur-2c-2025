# GLOSARIO T√âCNICO - Proyecto Soldasur

Este documento contiene los conceptos t√©cnicos clave utilizados en el desarrollo del chatbot Soldy y el sistema de recomendaci√≥n de productos PEISA-SOLDASUR.

---

## üìö Conceptos de IA y Machine Learning

### Embeddings
**Definici√≥n:** Representaciones vectoriales num√©ricas de texto que capturan el significado sem√°ntico de palabras, frases o documentos en un espacio multidimensional.

**Ejemplo:**
```python
# Texto original
texto = "caldera de gas natural"

# Embedding (vector simplificado de 3 dimensiones)
embedding = [0.82, -0.45, 0.31]

# Textos similares tendr√°n vectores cercanos
texto2 = "calefactor a gas"
embedding2 = [0.79, -0.42, 0.28]  # Vectores cercanos = significado similar
```

**Uso en Soldasur:** Los embeddings se generan para el cat√°logo de productos y las consultas de usuarios, permitiendo b√∫squedas sem√°nticas eficientes.

---

### FAISS (Facebook AI Similarity Search)
**Definici√≥n:** Biblioteca de Facebook para b√∫squeda eficiente de similitud en grandes conjuntos de vectores. Permite encontrar r√°pidamente los embeddings m√°s cercanos a una consulta.

**Ejemplo:**
```python
import faiss
import numpy as np

# Crear √≠ndice FAISS
dimension = 384  # Dimensi√≥n de los embeddings
index = faiss.IndexFlatL2(dimension)

# Agregar vectores al √≠ndice
vectors = np.random.random((1000, dimension)).astype('float32')
index.add(vectors)

# Buscar los 5 vectores m√°s similares
query = np.random.random((1, dimension)).astype('float32')
distances, indices = index.search(query, k=5)
```

**Uso en Soldasur:** El archivo `embeddings/products.faiss` almacena los embeddings del cat√°logo para b√∫squedas r√°pidas.

---

### LLM (Large Language Model)
**Definici√≥n:** Modelo de lenguaje de gran escala entrenado con enormes cantidades de texto para comprender y generar lenguaje natural.

**Ejemplo:**
```python
# Consulta al LLM
prompt = "¬øQu√© caldera recomiendas para 100m¬≤?"

# Respuesta del LLM
respuesta = "Para 100m¬≤ te recomiendo la Prima Tec Smart 24kW, 
             ideal para calefacci√≥n eficiente en ese espacio."
```

**Uso en Soldasur:** Ollama con modelos como Llama o Mistral para generar respuestas conversacionales.

---

### RAG (Retrieval-Augmented Generation)
**Definici√≥n:** T√©cnica que combina recuperaci√≥n de informaci√≥n con generaci√≥n de texto. Primero busca documentos relevantes y luego genera respuestas basadas en esa informaci√≥n.

**Ejemplo:**
```python
# 1. RETRIEVAL: Buscar productos relevantes
query = "caldera para 80m¬≤"
productos_relevantes = buscar_en_faiss(query)  # [Prima Tec Smart, Roca Victoria]

# 2. AUGMENTATION: Agregar contexto al prompt
contexto = f"Productos disponibles: {productos_relevantes}"

# 3. GENERATION: Generar respuesta con LLM
prompt = f"{contexto}\n\nPregunta: {query}"
respuesta = llm.generate(prompt)
```

**Uso en Soldasur:** El chatbot usa RAG para recomendar productos espec√≠ficos del cat√°logo.

---

### Prompt Engineering
**Definici√≥n:** T√©cnica de dise√±ar y optimizar las instrucciones (prompts) que se dan a un LLM para obtener respuestas m√°s precisas y √∫tiles.

**Ejemplo:**
```javascript
// Prompt b√°sico (menos efectivo)
const promptBasico = "Responde preguntas sobre calderas";

// Prompt optimizado (m√°s efectivo)
const promptOptimizado = `
Eres Soldy, vendedor experto de PEISA-SOLDASUR.
OBJETIVO: VENDER productos en respuestas ULTRA CORTAS (80-120 caracteres).
SIEMPRE recomienda al menos 1 producto espec√≠fico por nombre.
Formato: [Respuesta] + [Producto] + [Beneficio]
`;
```

**Uso en Soldasur:** El system prompt en `soldasur.js` est√° optimizado para respuestas de ventas cortas y efectivas.

---

## ü§ñ Sistemas Inteligentes

### Sistema Experto
**Definici√≥n:** Sistema de IA basado en reglas que emula el razonamiento de un experto humano en un dominio espec√≠fico. Usa una base de conocimiento y un motor de inferencia.

**Ejemplo:**
```javascript
// Base de conocimiento (reglas)
const reglas = {
  superficie_grande: {
    condicion: (datos) => datos.superficie > 150,
    recomendacion: "Caldera de alta potencia (>30kW)"
  },
  superficie_media: {
    condicion: (datos) => datos.superficie >= 80 && datos.superficie <= 150,
    recomendacion: "Caldera media potencia (20-30kW)"
  }
};

// Motor de inferencia
function recomendar(datos) {
  for (let regla of Object.values(reglas)) {
    if (regla.condicion(datos)) {
      return regla.recomendacion;
    }
  }
}

// Uso
const resultado = recomendar({ superficie: 100 });
// Output: "Caldera media potencia (20-30kW)"
```

**Uso en Soldasur:** El m√≥dulo `expertSystem.js` implementa reglas para recomendar calderas seg√∫n superficie, tipo de gas, etc.

---

### √Årbol de Decisi√≥n
**Definici√≥n:** Estructura de datos en forma de √°rbol donde cada nodo representa una pregunta o decisi√≥n, y las ramas representan las posibles respuestas.

**Ejemplo:**
```javascript
const arbolDecision = {
  pregunta: "¬øCu√°l es la superficie a calefaccionar?",
  opciones: [
    {
      condicion: "< 80m¬≤",
      siguiente: {
        pregunta: "¬øTipo de gas?",
        opciones: [
          { condicion: "Natural", resultado: "Prima Tec Smart 18kW" },
          { condicion: "Envasado", resultado: "Roca Victoria 20" }
        ]
      }
    },
    {
      condicion: "> 150m¬≤",
      resultado: "Prima Tec Smart 35kW"
    }
  ]
};
```

**Uso en Soldasur:** El sistema experto usa √°rboles de decisi√≥n para guiar las recomendaciones de productos.

---

## üåê Tecnolog√≠as Web

### Web Scraping
**Definici√≥n:** T√©cnica automatizada para extraer informaci√≥n de sitios web mediante programaci√≥n.

**Ejemplo:**
```python
from selenium import webdriver
from bs4 import BeautifulSoup

# Inicializar navegador
driver = webdriver.Chrome()
driver.get("https://ejemplo.com/productos")

# Extraer datos
soup = BeautifulSoup(driver.page_source, 'html.parser')
productos = soup.find_all('div', class_='producto')

for producto in productos:
    nombre = producto.find('h2').text
    precio = producto.find('span', class_='precio').text
    print(f"{nombre}: {precio}")
```

**Uso en Soldasur:** El m√≥dulo `scraping` extrae informaci√≥n actualizada del cat√°logo de productos PEISA.

---

### API REST
**Definici√≥n:** Interfaz de programaci√≥n de aplicaciones que usa HTTP para comunicaci√≥n entre sistemas, siguiendo principios REST.

**Ejemplo:**
```python
from flask import Flask, jsonify, request

app = Flask(__name__)

# Endpoint GET
@app.route('/api/productos', methods=['GET'])
def obtener_productos():
    return jsonify({"productos": ["Prima Tec", "Roca Victoria"]})

# Endpoint POST
@app.route('/api/consulta', methods=['POST'])
def procesar_consulta():
    datos = request.json
    respuesta = chatbot.responder(datos['pregunta'])
    return jsonify({"respuesta": respuesta})
```

**Uso en Soldasur:** Flask expone endpoints para el chatbot y el sistema experto.

---

### WebSocket
**Definici√≥n:** Protocolo de comunicaci√≥n bidireccional en tiempo real entre cliente y servidor sobre una √∫nica conexi√≥n TCP.

**Ejemplo:**
```javascript
// Cliente
const socket = new WebSocket('ws://localhost:8080');

socket.onmessage = (event) => {
  console.log('Mensaje recibido:', event.data);
};

socket.send('Hola desde el cliente');

// Servidor (Node.js)
const WebSocket = require('ws');
const wss = new WebSocket.Server({ port: 8080 });

wss.on('connection', (ws) => {
  ws.on('message', (message) => {
    ws.send(`Eco: ${message}`);
  });
});
```

**Uso en Soldasur:** Comunicaci√≥n en tiempo real entre la interfaz del chatbot y el backend.

---

## üìä Procesamiento de Datos

### CSV (Comma-Separated Values)
**Definici√≥n:** Formato de archivo de texto plano para almacenar datos tabulares, donde cada l√≠nea es un registro y las columnas se separan por comas.

**Ejemplo:**
```csv
id,nombre,precio,potencia,tipo_gas
1,Prima Tec Smart 24,45000,24kW,Natural
2,Roca Victoria 20,38000,20kW,Envasado
3,Peisa Diva 28,52000,28kW,Natural
```

```python
import pandas as pd

# Leer CSV
df = pd.read_csv('productos.csv')

# Filtrar productos
calderas_gas_natural = df[df['tipo_gas'] == 'Natural']
print(calderas_gas_natural)
```

**Uso en Soldasur:** `data/processed/products_mock.csv` almacena el cat√°logo procesado.

---

### Vectorizaci√≥n
**Definici√≥n:** Proceso de convertir texto u otros datos en vectores num√©ricos que pueden ser procesados por algoritmos de machine learning.

**Ejemplo:**
```python
from sentence_transformers import SentenceTransformer

# Modelo de vectorizaci√≥n
model = SentenceTransformer('all-MiniLM-L6-v2')

# Textos a vectorizar
textos = [
    "caldera de gas natural",
    "calefactor el√©ctrico",
    "termotanque solar"
]

# Generar embeddings
embeddings = model.encode(textos)
print(embeddings.shape)  # (3, 384) - 3 textos, 384 dimensiones
```

**Uso en Soldasur:** Se vectorizan descripciones de productos y consultas de usuarios para b√∫squedas sem√°nticas.

---

## üõ†Ô∏è Herramientas y Frameworks

### Gradio
**Definici√≥n:** Framework de Python para crear interfaces web interactivas para modelos de machine learning de forma r√°pida y sencilla.

**Ejemplo:**
```python
import gradio as gr

def saludar(nombre):
    return f"¬°Hola {nombre}!"

# Crear interfaz
interfaz = gr.Interface(
    fn=saludar,
    inputs=gr.Textbox(label="Tu nombre"),
    outputs=gr.Textbox(label="Saludo"),
    title="App de Saludos"
)

interfaz.launch()
```

**Uso en Soldasur:** Gradio proporciona la interfaz web del chatbot (aunque el proyecto usa principalmente JavaScript/HTML custom).

---

### Ollama
**Definici√≥n:** Herramienta para ejecutar modelos de lenguaje grandes (LLMs) localmente en tu computadora de forma sencilla.

**Ejemplo:**
```bash
# Instalar modelo
ollama pull llama2

# Ejecutar modelo
ollama run llama2

# Usar API
curl http://localhost:11434/api/generate -d '{
  "model": "llama2",
  "prompt": "¬øQu√© es una caldera?",
  "stream": false
}'
```

**Uso en Soldasur:** Ollama ejecuta el LLM localmente para generar respuestas del chatbot.

---

### LangChain
**Definici√≥n:** Framework para desarrollar aplicaciones con LLMs, facilitando la creaci√≥n de cadenas de procesamiento, RAG, agentes y m√°s.

**Ejemplo:**
```python
from langchain.llms import Ollama
from langchain.chains import RetrievalQA
from langchain.vectorstores import FAISS

# Configurar LLM
llm = Ollama(model="llama2")

# Configurar retriever
vectorstore = FAISS.load_local("embeddings/products.faiss")
retriever = vectorstore.as_retriever()

# Crear cadena RAG
qa_chain = RetrievalQA.from_chain_type(
    llm=llm,
    retriever=retriever,
    chain_type="stuff"
)

# Consultar
respuesta = qa_chain.run("¬øQu√© caldera recomiendas para 100m¬≤?")
```

**Uso en Soldasur:** Potencial uso para orquestar el flujo RAG del chatbot.

---

## üîß Conceptos de Desarrollo

### Virtual Environment (venv)
**Definici√≥n:** Entorno aislado de Python que permite instalar paquetes espec√≠ficos para un proyecto sin afectar el sistema global.

**Ejemplo:**
```bash
# Crear entorno virtual
python -m venv venv

# Activar (Windows)
venv\Scripts\activate

# Activar (Linux/Mac)
source venv/bin/activate

# Instalar dependencias
pip install -r requirements.txt

# Desactivar
deactivate
```

**Uso en Soldasur:** El proyecto usa un venv para aislar las dependencias de Python.

---

### Git & GitHub
**Definici√≥n:** Git es un sistema de control de versiones distribuido. GitHub es una plataforma de hosting para repositorios Git.

**Ejemplo:**
```bash
# Inicializar repositorio
git init

# Agregar cambios
git add .
git commit -m "feat: agregar sistema experto"

# Subir a GitHub
git remote add origin https://github.com/usuario/repo.git
git push -u origin main

# Crear rama
git checkout -b feature/nueva-funcionalidad
```

**Uso en Soldasur:** Control de versiones del c√≥digo y colaboraci√≥n en equipo.

---

### Makefile
**Definici√≥n:** Archivo que define comandos automatizados para compilar, ejecutar y mantener un proyecto.

**Ejemplo:**
```makefile
# Makefile
.PHONY: install run test clean

install:
	pip install -r requirements.txt

run:
	python app/main.py

test:
	pytest tests/

clean:
	rm -rf __pycache__ *.pyc
```

```bash
# Ejecutar comandos
make install
make run
make test
```

**Uso en Soldasur:** Automatiza tareas comunes del proyecto como instalaci√≥n y ejecuci√≥n.

---

## üìà M√©tricas y Evaluaci√≥n

### Similitud Coseno
**Definici√≥n:** M√©trica que mide la similitud entre dos vectores calculando el coseno del √°ngulo entre ellos. Valores cercanos a 1 indican alta similitud.

**Ejemplo:**
```python
import numpy as np

def similitud_coseno(vec1, vec2):
    dot_product = np.dot(vec1, vec2)
    norm1 = np.linalg.norm(vec1)
    norm2 = np.linalg.norm(vec2)
    return dot_product / (norm1 * norm2)

# Vectores de ejemplo
v1 = np.array([1, 2, 3])
v2 = np.array([2, 3, 4])

similitud = similitud_coseno(v1, v2)
print(f"Similitud: {similitud:.4f}")  # Output: 0.9926 (muy similares)
```

**Uso en Soldasur:** FAISS usa similitud coseno (o distancia L2) para encontrar productos relevantes.

---

### Token
**Definici√≥n:** Unidad b√°sica de texto procesada por un LLM. Puede ser una palabra, parte de una palabra o un car√°cter.

**Ejemplo:**
```python
# Texto original
texto = "La caldera Prima Tec es excelente"

# Tokenizaci√≥n (ejemplo simplificado)
tokens = ["La", "cal", "dera", "Prima", "Tec", "es", "exc", "elente"]
# Total: 8 tokens

# En LLMs
# "num_predict: 80" = m√°ximo 80 tokens en la respuesta
# Aproximadamente 60-80 palabras o 300-400 caracteres
```

**Uso en Soldasur:** Se limita a 80 tokens (`num_predict: 80`) para respuestas cortas y concisas.

---

## üéØ Conceptos de Negocio

### Chatbot Orientado a Ventas
**Definici√≥n:** Asistente conversacional dise√±ado espec√≠ficamente para guiar al cliente hacia la compra, recomendando productos y destacando beneficios.

**Ejemplo:**
```javascript
// Respuesta informativa (NO orientada a ventas)
"Las calderas de gas natural son m√°s eficientes que las de gas envasado."

// Respuesta orientada a ventas (CORRECTA)
"Para tu hogar te recomiendo la Prima Tec Smart 24kW a gas natural. 
 Ahorro del 30% en consumo y calefacci√≥n perfecta. ¬øTe interesa?"
```

**Uso en Soldasur:** Soldy est√° configurado para SIEMPRE recomendar productos espec√≠ficos en cada respuesta.

---

### Sistema de Recomendaci√≥n
**Definici√≥n:** Sistema que sugiere productos o servicios personalizados bas√°ndose en las necesidades y preferencias del usuario.

**Ejemplo:**
```python
def recomendar_caldera(superficie, tipo_gas, presupuesto):
    # Filtrar por tipo de gas
    productos = catalogo[catalogo['tipo_gas'] == tipo_gas]
    
    # Filtrar por potencia necesaria (superficie)
    potencia_necesaria = superficie * 0.1  # 100W por m¬≤
    productos = productos[productos['potencia'] >= potencia_necesaria]
    
    # Filtrar por presupuesto
    productos = productos[productos['precio'] <= presupuesto]
    
    # Ordenar por mejor relaci√≥n calidad-precio
    return productos.sort_values('rating', ascending=False).head(3)
```

**Uso en Soldasur:** Combina sistema experto + RAG para recomendar productos personalizados.

---

## üîê Seguridad y Configuraci√≥n

### Variables de Entorno
**Definici√≥n:** Variables externas al c√≥digo que almacenan configuraciones sensibles como API keys, contrase√±as o URLs.

**Ejemplo:**
```bash
# Archivo .env
OLLAMA_URL=http://localhost:11434
MODEL_NAME=llama2
MAX_TOKENS=80
DATABASE_URL=postgresql://user:pass@localhost/db
```

```python
# Leer en Python
import os
from dotenv import load_dotenv

load_dotenv()

ollama_url = os.getenv('OLLAMA_URL')
model_name = os.getenv('MODEL_NAME')
```

**Uso en Soldasur:** Configuraci√≥n de URLs, modelos y par√°metros sin hardcodear en el c√≥digo.

---

### .gitignore
**Definici√≥n:** Archivo que especifica qu√© archivos o directorios Git debe ignorar y no versionar.

**Ejemplo:**
```gitignore
# Entornos virtuales
venv/
env/

# Archivos de Python
__pycache__/
*.pyc
*.pyo

# Variables de entorno
.env

# Dependencias
node_modules/

# Datos sensibles
data/raw/*.xlsx
*.csv
```

**Uso en Soldasur:** Evita subir archivos grandes, sensibles o generados autom√°ticamente al repositorio.

---

## üìö Referencias

- **FAISS:** https://github.com/facebookresearch/faiss
- **Ollama:** https://ollama.ai/
- **LangChain:** https://python.langchain.com/
- **Gradio:** https://gradio.app/
- **Sentence Transformers:** https://www.sbert.net/

---

**√öltima actualizaci√≥n:** Octubre 2025  
**Proyecto:** Soldasur - Sistema de Recomendaci√≥n de Calderas PEISA
